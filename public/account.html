<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Account - BDGTR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles/reset.css" />
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/navigation.css" />
  <link rel="stylesheet" href="styles/account.css" />
  <link rel="stylesheet" href="styles/responsive.css" />

  <!-- React + Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
</head>
<body>
  <!-- React root container -->
  <div id="account-root"></div>

  <script type="text/babel">
    const Sidebar = ({ user }) => (
      <div className="account-sidebar">
        <p className="sidebar-greeting">Hi, {(user && user.firstName) || 'User'}</p>
        <button className="sidebar-button active">My Profile</button>
        <button className="sidebar-button">Security & Privacy</button>
        <button className="sidebar-button">Notifications</button>
        <button
          className="sidebar-button logout"
          onClick={() => {
            localStorage.removeItem('bdgtrUser');
            window.location.href = 'index.html';
          }}
        >
          Log Out
        </button>
        <button onClick={() => window.location.href = 'index.html'} className="back-button">‚Üê Back</button>
      </div>
    );

    const InfoCard = ({ title, fields }) => (
      <div className="info-card">
        <div className="card-header">
          <h3>{title}</h3>
          <button className="edit-button">Edit</button>
        </div>
        <div className="info-grid">
          {fields.map(({ label, value }) => (
            <div key={label}>
              <label>{label}</label>
              <p>{value || '-'}</p>
            </div>
          ))}
        </div>
      </div>
    );

    const AccountPage = () => {
      const user = JSON.parse(localStorage.getItem('bdgtrUser')) || {};

      const personalFields = [
        { label: 'First Name', value: user.firstName },
        { label: 'Last Name', value: user.lastName },
        { label: 'Email Address', value: user.email },
        { label: 'Country', value: user.country },
      ];

      const financialFields = [
        { label: 'Yearly Income', value: user.yearlyIncome ? `$${user.yearlyIncome}` : null },
        { label: 'Net Worth', value: user.netWorth ? `$${user.netWorth}` : null },
        { label: 'Total Debt', value: user.totalDebt ? `$${user.totalDebt}` : null },
        { label: 'Monthly Debt Payments', value: user.monthlyPayments ? `$${user.monthlyPayments}` : null },
      ];

      return (
        <div className="account-content">
          <Sidebar user={user} />
          <div className="account-main">
            <InfoCard title="Personal Information" fields={personalFields} />
            <InfoCard title="Your Information" fields={financialFields} />
          </div>
        </div>
      );
    };

    try {
      const root = document.getElementById('account-root');
      ReactDOM.createRoot(root).render(<AccountPage />);
    } catch (e) {
      document.body.innerHTML = '<h2 style="color:red;">React failed to load.</h2><pre>' + e.message + '</pre>';
    }
  </script>
</body>
</html>
